<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Barber Shop</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- LIFF SDK -->
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Kanit', sans-serif; background-color: #f8fafc; }
        
        /* ซ่อน Scrollbar สำหรับ Gallery แนวขวาง แต่ยังเลื่อนได้ */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="text-gray-800 pb-10 min-h-screen">

    <!-- Loading Screen -->
    <div id="loading-screen" class="min-h-screen flex flex-col justify-center items-center bg-white absolute inset-0 z-50">
        <div class="relative w-20 h-20 mb-4 flex items-center justify-center">
            <div class="absolute inset-0 border-4 border-gray-100 rounded-full"></div>
            <div class="absolute inset-0 border-4 border-blue-600 rounded-full border-t-transparent animate-spin"></div>
            <i class="fa-solid fa-scissors text-blue-600 text-xl"></i>
        </div>
        <p class="text-gray-500 font-medium">กำลังเตรียมร้าน...</p>
    </div>

    <!-- Login Screen -->
    <div id="login-screen" class="hidden min-h-screen flex flex-col justify-center items-center bg-white p-8">
        <div class="w-28 h-28 bg-gradient-to-br from-blue-600 to-blue-800 rounded-full flex items-center justify-center mx-auto shadow-xl shadow-blue-200 mb-6">
            <i class="fa-solid fa-scissors text-5xl text-white transform -rotate-45"></i>
        </div>
        <h1 class="text-4xl font-bold text-gray-900 mb-2 tracking-tight">The Barber</h1>
        <p class="text-gray-500 mb-10 text-center">ยินดีต้อนรับสู่ระบบจองคิวตัดผม<br>สะดวก รวดเร็ว ไม่ต้องรอคิวที่ร้าน</p>
        
        <button onclick="liff.login()" class="w-full max-w-sm bg-[#06C755] hover:bg-[#05b34c] active:scale-95 text-white font-bold py-4 px-8 rounded-2xl shadow-lg shadow-green-200 transition-all flex items-center justify-center gap-3 text-lg">
            <i class="fa-brands fa-line text-3xl"></i> เข้าสู่ระบบด้วย LINE
        </button>
    </div>

    <!-- Main Menu Screen -->
    <div id="main-menu" class="hidden pb-8">
        <!-- Navbar -->
        <div class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-40">
            <div class="max-w-md mx-auto px-5 py-4 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="relative">
                        <img id="profile-img" src="https://via.placeholder.com/40" class="w-12 h-12 rounded-full border-2 border-white shadow-sm object-cover">
                        <div class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"></div>
                    </div>
                    <div>
                        <p class="text-xs text-gray-500 font-medium">สวัสดีครับ,</p>
                        <p id="display-name" class="font-bold text-gray-800 text-lg leading-tight truncate w-40"></p>
                    </div>
                </div>
                <div class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-600 shadow-sm">
                    <i class="fa-solid fa-bell text-sm"></i>
                </div>
            </div>
        </div>

        <div class="max-w-md mx-auto p-5 space-y-8">
            
            <!-- Banner & Actions -->
            <section class="space-y-4">
                <div class="bg-gradient-to-r from-gray-900 to-gray-800 rounded-3xl p-6 text-white shadow-xl relative overflow-hidden">
                    <div class="relative z-10">
                        <div class="flex items-center gap-2 mb-2">
                            <span id="shop-status-badge" class="bg-gray-600 text-white text-xs font-bold px-3 py-1 rounded-full inline-flex items-center gap-1.5 shadow-sm">
                                <i class="fa-solid fa-circle-notch fa-spin text-[10px]"></i> เช็คสถานะร้าน...
                            </span>
                        </div>
                        <p class="text-[11px] text-gray-300 mb-4 opacity-90"><i class="fa-regular fa-clock mr-1"></i> เปิด 09:00 - 19:00 น. | หยุดทุกวันพุธ</p>
                        
                        <h2 class="text-2xl font-bold mb-1">จองคิวตัดผมวันนี้</h2>
                        <p class="text-gray-300 text-sm mb-5">เลือกช่างและเวลาที่คุณสะดวกได้เลย</p>
                        <a href="booking.html" class="inline-flex items-center gap-2 bg-white text-gray-900 font-bold px-5 py-2.5 rounded-xl text-sm hover:bg-gray-100 transition-colors shadow-lg">
                            จองคิวทันที <i class="fa-solid fa-arrow-right text-xs"></i>
                        </a>
                    </div>
                    <i class="fa-solid fa-scissors absolute -bottom-6 -right-2 text-9xl text-white opacity-10 transform rotate-[-20deg]"></i>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <a href="booking.html" class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex items-center gap-4 hover:border-blue-300 transition-all active:scale-95">
                        <div class="w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center shrink-0">
                            <i class="fa-solid fa-calendar-check text-xl text-blue-600"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">จองคิวใหม่</h3>
                            <p class="text-xs text-gray-400">เลือกวันเวลา</p>
                        </div>
                    </a>
                    <a href="history.html" class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex items-center gap-4 hover:border-orange-300 transition-all active:scale-95">
                        <div class="w-12 h-12 bg-orange-50 rounded-full flex items-center justify-center shrink-0">
                            <i class="fa-solid fa-clock-rotate-left text-xl text-orange-500"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">ประวัติ</h3>
                            <p class="text-xs text-gray-400">เช็คคิวของฉัน</p>
                        </div>
                    </a>
                </div>
            </section>

            <!-- Price List Section (ปรับปรุงใหม่ตามรายการที่ขอ) -->
            <section>
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-bold text-gray-900">อัตราค่าบริการ</h2>
                    <span class="text-xs text-gray-500 flex items-center gap-1"><i class="fa-solid fa-tag"></i> ราคามาตรฐาน</span>
                </div>
                <div class="bg-white rounded-3xl shadow-sm border border-gray-100 p-2">
                    <ul class="divide-y divide-gray-100">
                        <!-- ตัดผมเด็กเล็ก -->
                        <li class="flex items-center justify-between p-4 hover:bg-gray-50 rounded-2xl transition-colors">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-500">
                                    <i class="fa-solid fa-baby"></i>
                                </div>
                                <div>
                                    <p class="font-bold text-gray-800 text-sm">เด็กเล็ก</p>
                                    <p class="text-xs text-gray-400">อายุไม่เกิน 7 ปี</p>
                                </div>
                            </div>
                            <span class="font-bold text-lg text-gray-900">60฿</span>
                        </li>
                        
                        <!-- ตัดผมเด็กโต -->
                        <li class="flex items-center justify-between p-4 hover:bg-gray-50 rounded-2xl transition-colors">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-sky-50 rounded-full flex items-center justify-center text-sky-500">
                                    <i class="fa-solid fa-child"></i>
                                </div>
                                <div>
                                    <p class="font-bold text-gray-800 text-sm">เด็กโต / นักเรียน</p>
                                    <p class="text-xs text-gray-400">อายุ 8 - 15 ปี</p>
                                </div>
                            </div>
                            <span class="font-bold text-lg text-gray-900">100฿</span>
                        </li>
                        
                        <!-- ตัดผมผู้ใหญ่ -->
                        <li class="flex items-center justify-between p-4 hover:bg-gray-50 rounded-2xl transition-colors">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-emerald-50 rounded-full flex items-center justify-center text-emerald-500">
                                    <i class="fa-solid fa-user-tie"></i>
                                </div>
                                <div>
                                    <p class="font-bold text-gray-800 text-sm">ตัดผมผู้ใหญ่</p>
                                    <p class="text-xs text-gray-400">ตัด ซอย เซ็ตทรง</p>
                                </div>
                            </div>
                            <span class="font-bold text-lg text-gray-900">120-140฿</span>
                        </li>

                        <!-- แคะหู (เพิ่มใหม่) -->
                        <li class="flex items-center justify-between p-4 hover:bg-gray-50 rounded-2xl transition-colors">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-yellow-50 rounded-full flex items-center justify-center text-yellow-600">
                                    <i class="fa-solid fa-hand-sparkles"></i>
                                </div>
                                <div>
                                    <p class="font-bold text-gray-800 text-sm">แคะหู</p>
                                    <p class="text-xs text-gray-400">ทำความสะอาด</p>
                                </div>
                            </div>
                            <span class="font-bold text-lg text-gray-900">50฿</span>
                        </li>

                        <!-- ล้างตา (เพิ่มใหม่) -->
                        <li class="flex items-center justify-between p-4 hover:bg-gray-50 rounded-2xl transition-colors">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-cyan-50 rounded-full flex items-center justify-center text-cyan-600">
                                    <i class="fa-solid fa-eye"></i>
                                </div>
                                <div>
                                    <p class="font-bold text-gray-800 text-sm">ล้างตา</p>
                                    <p class="text-xs text-gray-400">ผ่อนคลายดวงตา</p>
                                </div>
                            </div>
                            <span class="font-bold text-lg text-gray-900">50฿</span>
                        </li>

                        <!-- ทำสีผม (เพิ่มใหม่) -->
                        <li class="flex items-center justify-between p-4 hover:bg-gray-50 rounded-2xl transition-colors">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-purple-50 rounded-full flex items-center justify-center text-purple-600">
                                    <i class="fa-solid fa-paintbrush"></i>
                                </div>
                                <div>
                                    <p class="font-bold text-gray-800 text-sm">ทำสีผม</p>
                                    <p class="text-xs text-gray-400">ปิดผมขาว</p>
                                </div>
                            </div>
                            <span class="font-bold text-lg text-gray-900">100฿</span>
                        </li>

                        <!-- ดัดผม/ยืดผม (เพิ่มใหม่) -->
                        <li class="flex items-center justify-between p-4 hover:bg-gray-50 rounded-2xl transition-colors">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-pink-50 rounded-full flex items-center justify-center text-pink-600">
                                    <i class="fa-solid fa-wand-magic-sparkles"></i>
                                </div>
                                <div>
                                    <p class="font-bold text-gray-800 text-sm">ดัดผม - ยืดผม</p>
                                    <p class="text-xs text-gray-400">วอลลุ่ม / ตรงธรรมชาติ</p>
                                </div>
                            </div>
                            <span class="font-bold text-lg text-gray-900">1,000฿</span>
                        </li>
                    </ul>
                </div>
            </section>

            <!-- Gallery Section -->
            <section>
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-bold text-gray-900">ทรงผมยอดฮิต</h2>
                    <span class="text-xs text-blue-600 font-medium">ดูทั้งหมด</span>
                </div>
                <!-- Horizontal Scroll Container -->
                <div class="flex overflow-x-auto gap-4 pb-4 snap-x hide-scrollbar px-1">
                    
                    <!-- Item 1 -->
                    <div class="min-w-[130px] snap-center">
                        <img src="https://images.unsplash.com/photo-1622286342621-4bd786c2447c?auto=format&fit=crop&q=80&w=300&h=300" class="w-32 h-32 object-cover rounded-2xl shadow-sm border border-gray-100 mb-2">
                        <p class="text-sm font-bold text-gray-800 text-center">Fade Cut</p>
                        <p class="text-[10px] text-gray-400 text-center">เฟดไล่ระดับ</p>
                    </div>

                    <!-- Item 2 -->
                    <div class="min-w-[130px] snap-center">
                        <img src="https://images.unsplash.com/photo-1599351431202-1e0f0137899a?auto=format&fit=crop&q=80&w=300&h=300" class="w-32 h-32 object-cover rounded-2xl shadow-sm border border-gray-100 mb-2">
                        <p class="text-sm font-bold text-gray-800 text-center">Undercut</p>
                        <p class="text-[10px] text-gray-400 text-center">อันเดอร์คัท</p>
                    </div>

                    <!-- Item 3 -->
                    <div class="min-w-[130px] snap-center">
                        <img src="https://images.unsplash.com/photo-1605497788044-5a32c7078486?auto=format&fit=crop&q=80&w=300&h=300" class="w-32 h-32 object-cover rounded-2xl shadow-sm border border-gray-100 mb-2">
                        <p class="text-sm font-bold text-gray-800 text-center">Pompadour</p>
                        <p class="text-[10px] text-gray-400 text-center">ปอมปาดัวร์เซ็ตวินเทจ</p>
                    </div>

                    <!-- Item 4 -->
                    <div class="min-w-[130px] snap-center">
                        <img src="https://images.unsplash.com/photo-1512804593922-0a1518f88301?auto=format&fit=crop&q=80&w=300&h=300" class="w-32 h-32 object-cover rounded-2xl shadow-sm border border-gray-100 mb-2">
                        <p class="text-sm font-bold text-gray-800 text-center">Buzz Cut</p>
                        <p class="text-[10px] text-gray-400 text-center">สกินเฮด สั้นเกรียน</p>
                    </div>

                    <!-- Item 5 -->
                    <div class="min-w-[130px] snap-center">
                        <img src="https://images.unsplash.com/photo-1588665045610-1845bb08f6eb?auto=format&fit=crop&q=80&w=300&h=300" class="w-32 h-32 object-cover rounded-2xl shadow-sm border border-gray-100 mb-2">
                        <p class="text-sm font-bold text-gray-800 text-center">Mullet</p>
                        <p class="text-[10px] text-gray-400 text-center">รากไทรยอดฮิต</p>
                    </div>

                    <!-- Item 6 -->
                    <div class="min-w-[130px] snap-center">
                        <img src="https://images.unsplash.com/photo-1593720213428-28a5b9e94613?auto=format&fit=crop&q=80&w=300&h=300" class="w-32 h-32 object-cover rounded-2xl shadow-sm border border-gray-100 mb-2">
                        <p class="text-sm font-bold text-gray-800 text-center">Two Block</p>
                        <p class="text-[10px] text-gray-400 text-center">ทูบล็อคสไตล์เกาหลี</p>
                    </div>

                </div>
            </section>

        </div>
    </div>

    <script>
        // แก้ไขเป็น LIFF ID ของคุณ
        const LIFF_ID = "2009061981-DcElzckB"; 
        
        // ฟังก์ชันอัปเดตสถานะร้าน
        function updateShopStatus() {
            const badge = document.getElementById('shop-status-badge');
            const now = new Date();
            const day = now.getDay(); // 0 = วันอาทิตย์, 1 = วันจันทร์, ..., 3 = วันพุธ
            const hour = now.getHours();
            
            // เปิด 09.00 - 19.00 และหยุดวันพุธ (day !== 3)
            const isOpen = (day !== 3) && (hour >= 9 && hour < 19);

            if (isOpen) {
                badge.className = "bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full inline-flex items-center gap-1.5 shadow-sm shadow-green-500/30";
                badge.innerHTML = '<i class="fa-solid fa-circle text-[8px] animate-pulse"></i> เปิดบริการ';
            } else {
                badge.className = "bg-red-500 text-white text-xs font-bold px-3 py-1 rounded-full inline-flex items-center gap-1.5 shadow-sm shadow-red-500/30";
                const reason = (day === 3) ? "วันนี้วันหยุดร้าน" : "นอกเวลาทำการ";
                badge.innerHTML = `<i class="fa-solid fa-lock text-[10px]"></i> ปิดบริการ (${reason})`;
            }
        }

        document.addEventListener('DOMContentLoaded', async () => {
            updateShopStatus();

            try {
                if (LIFF_ID === "YOUR_LIFF_ID") {
                    setTimeout(() => {
                        document.getElementById('display-name').textContent = "ลูกค้าจำลอง";
                        document.getElementById('loading-screen').classList.add('hidden');
                        document.getElementById('main-menu').classList.remove('hidden');
                    }, 800);
                    return;
                }

                await liff.init({ liffId: LIFF_ID });
                if (liff.isLoggedIn()) {
                    const profile = await liff.getProfile();
                    
                    localStorage.setItem('userId', profile.userId);
                    localStorage.setItem('userName', profile.displayName);
                    
                    document.getElementById('display-name').textContent = profile.displayName;
                    document.getElementById('profile-img').src = profile.pictureUrl;
                    
                    document.getElementById('loading-screen').classList.add('hidden');
                    document.getElementById('main-menu').classList.remove('hidden');
                } else {
                    document.getElementById('loading-screen').classList.add('hidden');
                    document.getElementById('login-screen').classList.remove('hidden');
                }
            } catch (err) {
                console.error("LIFF Init Error", err);
                document.getElementById('loading-screen').classList.add('hidden');
                document.getElementById('login-screen').classList.remove('hidden');
            }
        });
    </script>
</body>
</html>